# TRƯỜNG ĐẠI HỌC KHOA HỌC TỰ NHIÊN, ĐHQG-HCM
## ĐỀ THI KẾT THÚC HỌC PHẦN - CLC
## Học kỳ 1 – Năm học 2024-2025

| **Tên môn học:** | Phương pháp lập trình hướng đối tượng |
| :--- | :--- |
| **Mã môn học:** | CSC10003 |
| **Thời gian:** | 100 phút |
| **Ngày thi:** | 27/12/2024 |
| **Ghi chú:** | Sinh viên [x] được phép / [ ] không được phép sử dụng tài liệu trong phòng thi |

**Lưu ý:**
- Chỉ được phép sử dụng một tờ giấy A4 tài liệu (viết tay hoặc in trên cả hai mặt).
- Khuyến khích sinh viên trả lời bằng tiếng Anh.

---
* **Link đề:** [https://www.facebook.com/groups/tailieuhcmus/posts/1567351833897807](https://www.facebook.com/groups/tailieuhcmus/posts/1567351833897807)
* **Video giải đề:** [https://youtu.be/FVqdyPGBpUI](https://youtu.be/FVqdyPGBpUI)
* **Repo Github của Nguyễn Hồng Đức:** [https://github.com/nguyenhongduc2411/Nostalgia](https://github.com/nguyenhongduc2411/Nostalgia)

---

**Câu 1 (1 điểm):** Nêu sự khác biệt giữa "`struct`" và "`class`" trong C++.

**Câu 2 (2 điểm):** Giả sử tất cả các thư viện cần thiết đã được khai báo, hãy đọc đoạn mã C++ dưới đây và trả lời các câu hỏi sau:

<table width="100%">
<tr>
<td width="50%" valign="top">
<pre lang="cpp">
01 class Figure {
02 protected:
03   string _name;
04 public:
05   virtual void showFigure() {
06     cout << _name << endl;
07   }
08   virtual double calcArea() = 0;
09 };
10 class Point {
11 private:
12   int _x, _y;
13 public:
14   Point(int x, int y) {
15     cout << "1st point constructor" << endl;
16     _x = x;
17     _y = y;
18   }
19   Point(const Point& I) {
20     cout << "2nd point constructor" << endl;
21     _x = I._x;
22     _y = I._y;
23   }
24   void setX(int x) { _x = x; }
25   void setY(int y) { _y = y; }
26   int getX() { return _x; }
27   int getY() { return _y; }
28   ~Point() {
29     cout << "Point destructor" << endl;
30   }
31 };
</pre>
</td>
<td width="50%" valign="top">
<pre lang="cpp">
32 class Circle: public Figure {
33 private:
34   Point* _I; double _R;
35 public:
36   void setI(const Point& I) {
37     if (_I == nullptr) _I = new Point(I);
38     else *(_I) = I;
39   }
40   void setR(double R) {
41     if(R >= 0) _R = R;
42   }
43   double getR() { return _R; }
44   double calcArea() { return 3.14 * _R * _R; }
45   Circle() {
46     cout << "Circle constructor" << endl;
47     _name = "Circle"; _I = nullptr; _R = 0;
48   }
49   ~Circle() {
50     if (_I != nullptr) delete _I;
51     cout << "Circle destructor" << endl;
52   }
53   void showFigure() {
54     cout << _name << ": " << calcArea() << endl;
55   }
56 };
57 void main() {
58   Circle* c = new Circle();
59   Point I(1, 2);
60   c->setI(I); c->setR(2);
61   c->showFigure();
62   delete c;
63 }
</pre>
</td>
</tr>
</table>

a) Những gì sẽ được in ra màn hình khi biên dịch và thực thi chương trình trên? (1 điểm) <br>
b) Giải thích thứ tự thực thi của chương trình (1 điểm).

**Câu 3 (3 điểm):** Viết chương trình C++ để cài đặt lớp Complex đại diện cho số phức. Lớp này cần:
1.  Có **hai thành phần dữ liệu private**: `real` (cho phần thực) và `imag` (cho phần ảo). <br>
2.  Cung cấp các **constructor** cho: <br>
    * Khởi tạo mặc định (0 + 0i),
    * Khởi tạo tham số.
3.  Nạp chồng (overload) các toán tử sau: <br>
    * `+` để cộng hai số phức,
    * `-` để trừ hai số phức,
    * `*` để nhân hai số phức.
4.  Nạp chồng các **toán tử luồng (stream operators) << và >>**: <br>
    * `>>` cho phép người dùng nhập phần thực và phần ảo của một số phức.
    * `<<` hiển thị một số phức theo định dạng: a + bi.

**Câu 4 (4 điểm):** Cho hàm main sau:

```cpp
#include <iostream>
#include <vector>

void main() {
    std::vector<IShape*> shapes = {
        new Rectangle(10, 6),
        new Square(5),
        new Rectangle(8, 5),
        new Square(3)
    };

    for (const IShape* shape : shapes) {
        std::cout << shape->toString() << "\n";
    }
    // code giải phóng toàn bộ bộ nhớ đã cấp phát nằm ở đây
}
```

**Output mẫu:**

```text
Rectangle Width=10, Height=6
Square Side=5
Rectangle Width=8, Height=5
Square Side=3
```

**Yêu cầu:**

1.  Vẽ sơ đồ lớp.
2.  Khai báo và cài đặt tất cả các lớp.
3.  Điều gì xảy ra nếu trong constructor của hai lớp Rectangle và Square, các tham số là số âm? Điều này sẽ dẫn đến việc khởi tạo thất bại.
4.  Đề xuất một giải pháp cho vấn đề này. Vẽ lại sơ đồ lớp hoặc viết lại khối mã bị ảnh hưởng nếu cần thiết.

Nếu chúng ta muốn hiển thị các hình này thành dạng **đặc** và **rỗng**, với ký tự hiển thị có thể tùy chỉnh như *, +, @, - thì sao?

```text
**********
**********
**********
**********

+++++
+   +
+   +
+   +
+++++

@@@@@@@@
@@@@@@@@
@@@@@@@@
@@@@@@@@
@@@@@@@@

---
- -
---
```

Dòng code này sẽ không còn phù hợp:

```cpp
std::cout << shape->toString() << "\n";
```

Đề xuất một giải pháp cho vấn đề này. Vẽ lại sơ đồ lớp hoặc viết lại khối mã bị ảnh hưởng nếu cần thiết.

<br> <div align="center">
    ---Hết---
</div>